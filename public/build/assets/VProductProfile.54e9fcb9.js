import{o as r,e as d,a as e,r as g,f as c,n as u,g as m,M as h,b as k,v as I,F as v,I as x,J as p,p as B,j as z}from"./app.d9929a02.js";import{u as A}from"./data.a1d14ce3.js";import M from"./VRetBtn.77bd577d.js";import{a as R}from"./functions.0fa17830.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as C}from"./StarIcon.ef846fe3.js";import"./IconArrow.6c698448.js";function E(s,y){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M1 5.25A2.25 2.25 0 013.25 3h13.5A2.25 2.25 0 0119 5.25v9.5A2.25 2.25 0 0116.75 17H3.25A2.25 2.25 0 011 14.75v-9.5zm1.5 5.81v3.69c0 .414.336.75.75.75h13.5a.75.75 0 00.75-.75v-2.69l-2.22-2.219a.75.75 0 00-1.06 0l-1.91 1.909.47.47a.75.75 0 11-1.06 1.06L6.53 8.091a.75.75 0 00-1.06 0l-2.97 2.97zM12 7a1 1 0 11-2 0 1 1 0 012 0z","clip-rule":"evenodd"})])}function $(s,y){return r(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})])}const b=s=>(B("data-v-519d69cc"),s=s(),z(),s),F={class:"container py-4 px-6"},J={class:"flex items-center justify-between"},T={class:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-4"},W={class:"col-span-1"},H=["src"],q={class:"col-span-2"},G=b(()=>e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},"Title",-1)),K=b(()=>e("label",{for:"description",class:"block text-sm font-medium text-gray-700 my-2"},"Description",-1)),Q=b(()=>e("label",{for:"price",class:"block text-sm font-medium text-gray-700"},"Price",-1)),X={class:"flex flex-wrap gap-8 items-center justify-start my-8"},Y=["for"],Z=["onChange","id"],ee=["src"],te=["onClick"],se={class:"w-full"},oe=b(()=>e("h1",{class:"text-2xl font-bold"}," Customer Reviews ",-1)),le={class:"flex items-end gap-4 m-4"},ae={class:"flex items-center"},re={class:"text-gray-500 text-xs"},de={class:"font-bold text-xl",style:{"margin-left":"0"}},ie={class:"text-gray-500"},ne={class:"flex items-center mt-3 -translate-x-1"},ce={class:"mt-3 text-gray-600 text-xl"},ue={__name:"VProductProfile",props:{prod:Object},emits:["back"],setup(s,{emit:y}){const n=s,S=A();console.log("id : l",n.prod);const j=o=>{let l=S.data.clients.filter(t=>t.id==o)[0];return` ${l.first_name} ${l.last_name}`},_=g(null),i=g(n.prod.images.filter((o,l)=>l>0)),f=g([]),w=g([]),L=()=>{i.value[i.value.length-1]!=0&&i.value.push(0)},V=o=>{i.value[o]={path:URL.createObjectURL(f.value[o].childNodes[0].childNodes[0].files[0])}},D=()=>{n.prod.images[0].path=URL.createObjectURL(_.value.files[0])},N=async()=>{const o=new FormData;o.append("title",n.prod.title),o.append("description",n.prod.description),o.append("price",n.prod.price),o.append("product_id",n.prod.id),n.prod.images[0].path.startsWith("blob")&&o.append("mainImage",_.value.files[0]);let l=0;for(let a=0;a<f.value.length;a++)i.value[a]!=0&&i.value[a].path.startsWith("blob")&&(o.append(`sideImage${l}`,f.value[a].childNodes[0].childNodes[0].files[0]),l++);o.append("n_images",l),o.append("toDelete",JSON.stringify(w.value)),console.log("form data : ",o);const t=await axios.post("/dashboard/products/update",o);console.log("res : ",t),t.status==200&&t.data.success?alert("Success"):alert("Error")},P=o=>{i.value[o].id&&w.value.push(i.value[o].id),i.value=i.value.filter((l,t)=>o!=t),console.log("delete ids : ",w.value)};return(o,l)=>(r(),d("div",F,[e("div",J,[c(M,{onBack:l[0]||(l[0]=t=>y("back"))}),e("div",null,[e("button",{class:"font-bold text-xl px-4 rounded-lg",onClick:N},"Save")])]),e("div",T,[e("div",W,[e("div",{class:u(["relative border border-dashed border-gray-600 rounded-lg aspect-1 overflow-hidden",s.prod.images[0].path?"border-none":""])},[e("label",{for:"mainImage",class:u(["flex items-center justify-center h-full",s.prod.images[0].path?"hidden":""])},[e("input",{type:"file",id:"mainImage",accept:"image/*",class:"hidden",ref_key:"mainImage",ref:_,onChange:D},null,544),c(m(E),{class:"w-10 h-10"})],2),s.prod.images[0].path?(r(),d("img",{key:0,src:s.prod.images[0].path,alt:"",class:"object-cover h-full w-full"},null,8,H)):h("",!0),s.prod.images[0].path?(r(),d("div",{key:1,class:"absolute top-0 right-0 cursor-pointer",onClick:l[1]||(l[1]=t=>s.prod.images[0].path="")},[c(m($),{class:"w-8 h-8"})])):h("",!0)],2)]),e("div",q,[e("div",null,[G,k(e("input",{type:"text",name:"title",id:"title",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm","onUpdate:modelValue":l[2]||(l[2]=t=>s.prod.title=t)},null,512),[[I,s.prod.title]])]),e("div",null,[K,k(e("textarea",{name:"description",id:"description",rows:"5",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm my-2","onUpdate:modelValue":l[3]||(l[3]=t=>s.prod.description=t)},null,512),[[I,s.prod.description]])]),e("div",null,[Q,k(e("input",{type:"text",name:"price",id:"price",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm","onUpdate:modelValue":l[4]||(l[4]=t=>s.prod.price=t)},null,512),[[I,s.prod.price]])])])]),e("div",X,[(r(!0),d(v,null,x(i.value,(t,a)=>(r(),d("div",{key:a,ref_for:!0,ref_key:"sideImages",ref:f,class:u(["relative rounded-lg border aspect-1 w-24 flex items-center justify-center overflow-hidden",t==0?"border  border-gray-600 border-dashed":""])},[e("label",{for:`simg${a}`,class:u([t==0?"":"hidden","w-full h-full"])},[e("input",{type:"file",onChange:U=>V(a),id:`simg${a}`,accept:"image/*",class:"hidden"},null,40,Z)],10,Y),t!=0?(r(),d("img",{key:0,src:t.path,class:"object-cover w-full h-full"},null,8,ee)):h("",!0),t.path?(r(),d("div",{key:1,class:"absolute top-0 right-0 cursor-pointer",onClick:U=>P(a)},[c(m($),{class:"w-6 h-6"})],8,te)):h("",!0)],2))),128)),e("div",null,[e("button",{class:"text-4xl font-bold",onClick:L},"+")])]),e("div",se,[oe,e("div",le,[e("div",ae,[(r(),d(v,null,x([0,1,2,3,4],t=>c(m(C),{key:t,class:u([s.prod.stars>t?"text-yellow-400":"text-gray-200","h-5 w-5 flex-shrink-0"]),"aria-hidden":"true"},null,8,["class"])),64))]),e("span",re,p(s.prod.rating)+" Based on "+p(s.prod.all_reviews.length)+" review(s)",1)]),(r(!0),d(v,null,x(s.prod.all_reviews,t=>(r(),d("div",{class:"p-5 mt-4 border-b last:border-none",key:t.id},[e("h2",de,p(j(t.user_id)),1),e("p",ie,p(m(R)(t.created_at)),1),e("div",ne,[(r(),d(v,null,x([0,1,2,3,4],a=>c(m(C),{key:a,class:u([t.rating>a?"text-yellow-400":"text-gray-200","h-5 w-5 flex-shrink-0"]),"aria-hidden":"true"},null,8,["class"])),64))]),e("p",ce,p(t.review),1)]))),128))])]))}},be=O(ue,[["__scopeId","data-v-519d69cc"]]);export{be as default};
