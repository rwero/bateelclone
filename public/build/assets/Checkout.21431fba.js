import{o as f,b as h,a as e,r as _,j as y,h as P,d as m,w as L,u as r,I as V,k as b,K as g,F as $,D as U,E as p,J as M,R,L as B,M as I}from"./app.be6d4f86.js";import{A as T}from"./ApplicationLogo.bfc83c28.js";import{g as A,r as N}from"./functions.4f11252d.js";import{r as q}from"./PhoneIcon.a8fa1590.js";function w(u,t){return f(),h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})])}var k="https://js.stripe.com/v3",F=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,S="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",O=function(){for(var t=document.querySelectorAll('script[src^="'.concat(k,'"]')),s=0;s<t.length;s++){var a=t[s];if(!!F.test(a.src))return a}return null},z=function(t){var s=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(k).concat(s);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(a),a},D=function(t,s){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"1.41.0",startTime:s})},v=null,G=function(t){return v!==null||(v=new Promise(function(s,a){if(typeof window>"u"){s(null);return}if(window.Stripe&&t&&console.warn(S),window.Stripe){s(window.Stripe);return}try{var i=O();i&&t?console.warn(S):i||(i=z(t)),i.addEventListener("load",function(){window.Stripe?s(window.Stripe):a(new Error("Stripe.js not available"))}),i.addEventListener("error",function(){a(new Error("Failed to load Stripe.js"))})}catch(d){a(d);return}})),v},W=function(t,s,a){if(t===null)return null;var i=t.apply(void 0,s);return D(i,a),i},j=Promise.resolve().then(function(){return G(null)}),C=!1;j.catch(function(u){C||console.warn(u)});var Z=function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];C=!0;var i=Date.now();return j.then(function(d){return W(d,s,i)})};const K={class:"min-h-screen bg-gray-100"},H={class:"bg-white border-b border-gray-100"},J={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Q={class:"flex justify-between h-16"},X={class:"flex"},Y={class:"shrink-0 flex items-center"},ee={key:0,class:"max-w-7xl mx-auto my-8 px-8"},te={class:"flex items-center justify-center gap-8 rounded-lg bg-indigo-600 px-8 py-4 font-medium text-white"},se=e("span",{class:"text-center"}," Orders are usually shipped within 24 hours of order acceptance (Monday to Friday) and expected to arrive within 10 working days. ",-1),oe={class:"max-w-7xl mx-auto mt-8 px-8"},ae={class:"grid md:grid-cols-7 grid-cols-1 gap-8"},de={class:"md:col-span-4 col-span-1 mb-8"},ne={class:""},ie={action:"#",method:"POST"},le={class:"overflow-hidden shadow-lg rounded-lg"},re={class:"bg-white p-6"},ce=e("h2",{class:"text-xl font-bold mb-4"},"Shipping Information",-1),ue={class:"grid grid-cols-6 gap-6"},me={class:"col-span-6 sm:col-span-3"},pe=e("label",{for:"first-name",class:"block text-sm font-medium text-gray-700"},"First name",-1),_e=["disabled","value"],fe={class:"col-span-6 sm:col-span-3"},he=e("label",{for:"last-name",class:"block text-sm font-medium text-gray-700"},"Last name",-1),be=["disabled","value"],ge={class:"col-span-6 sm:col-span-3"},ve=e("label",{for:"email-address",class:"block text-sm font-medium text-gray-700"},"Email address",-1),xe=["disabled","value"],ye={class:"col-span-6 sm:col-span-3"},we=e("label",{for:"company-website",class:"block text-sm font-medium text-gray-700"},"Phone number",-1),Se={class:"mt-1 flex rounded-md shadow-sm"},ke={class:"inline-flex items-center rounded-l-md border border-r-0 border-gray-300 bg-gray-50 px-3 text-sm text-gray-500"},je=["disabled"],Ce={class:"col-span-6 sm:col-span-3"},Ee=e("label",{for:"country",class:"block text-sm font-medium text-gray-700"},"Country",-1),Pe=["disabled"],Le=e("option",null,"United States",-1),Ve=e("option",null,"Canada",-1),$e=e("option",null,"Mexico",-1),Ue=e("option",{selected:""},"Algeria",-1),Me=[Le,Ve,$e,Ue],Re={class:"col-span-6"},Be=e("label",{for:"street-address",class:"block text-sm font-medium text-gray-700"},"Street address",-1),Ie=["disabled"],Te={class:"col-span-6 sm:col-span-6 lg:col-span-2"},Ae=e("label",{for:"city",class:"block text-sm font-medium text-gray-700"},"City",-1),Ne=["disabled"],qe={class:"col-span-6 sm:col-span-3 lg:col-span-2"},Fe=e("label",{for:"region",class:"block text-sm font-medium text-gray-700"},"State / Province",-1),Oe=["disabled"],ze={class:"col-span-6 sm:col-span-3 lg:col-span-2"},De=e("label",{for:"postal-code",class:"block text-sm font-medium text-gray-700"},"ZIP / Postal code",-1),Ge=["disabled"],We=M('<div class="mt-6"><label for="about" class="block text-sm font-medium text-gray-700">Order Notes</label><div class="mt-1"><textarea id="about" name="about" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="you@example.com"></textarea></div><p class="mt-2 text-sm text-gray-500"> Notes about your order, e.g. special notes for delivery. </p></div>',1),Ze={class:"bg-white border-b border-t border-gray-300 pt-6 mt-6 pb-8"},Ke=e("h2",{class:"text-xl font-bold"},"Shipping Information",-1),He={class:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center justify-between mt-6"},Je={class:"rounded-lg border-2 border-indigo-500 p-4"},Qe={class:"flex items-center justify-between"},Xe=e("span",{class:"font-bold"},"Standrad",-1),Ye=e("p",{class:"text-gray-500"},"4-10 business days",-1),et=e("p",{class:"mt-6 font-bold"},"$5.00",-1),tt={class:"rounded-lg border border-gray-300 p-4 hidden"},st={class:"flex items-center justify-between"},ot=e("span",{class:"font-bold"},"Express",-1),at=e("p",{class:"text-gray-500"},"2-5 business days",-1),dt=e("p",{class:"mt-6 font-bold"},"$16.00",-1),nt={class:"pt-6 pb-4"},it=e("h2",{class:"text-xl font-bold"},"Payment",-1),lt={class:"flex gap-8 items-center pt-6"},rt={class:"flex items-center justify-start gap-3"},ct=["disabled"],ut=e("label",{for:"cc",class:"text-gray-700"},"Credit Card",-1),mt=e("div",{class:"pt-6 pb-4"},[e("div",{id:"card-element"})],-1),pt={class:"md:col-span-3 col-span-1 mb-8"},_t={class:"rounded-lg bg-white border border-gray-100 p-4 shadow-lg"},ft=e("h2",{class:"text-xl font-bold pb-2 border-b border-gray-100 mb-4"},"Summary",-1),ht={class:"flow-root"},bt={role:"list",class:"-my-6 divide-y divide-gray-200"},gt={class:"h-24 w-24 flex-shrink-0 overflow-hidden rounded-md border border-gray-200"},vt=["src"],xt={class:"ml-4 flex flex-1 flex-col"},yt={class:"flex justify-between text-base font-medium text-gray-900"},wt=["href"],St={class:"ml-4"},kt={class:"flex flex-1 items-end justify-between text-sm"},jt={class:"text-gray-500"},Ct=e("div",{class:"flex"},[e("button",{type:"button",class:"font-medium text-indigo-600 hover:text-indigo-500"},"Remove")],-1),Et={class:"border-t border-gray-200 mt-6 pt-4"},Pt={class:"flex justify-between text-base font-medium text-gray-900 mb-2"},Lt=e("p",null,"Subtotal",-1),Vt=e("div",{class:"flex justify-between text-base font-medium text-gray-900 my-2"},[e("p",null,"Shipping"),e("p",null,"$5.00")],-1),$t={class:"flex justify-between text-base font-medium text-gray-900 my-2"},Ut=e("p",null,"Total",-1),Mt={class:"mt-6"},Rt=["textContent"],Nt={__name:"Checkout",setup(u){const t=_(!0),s=_([]),a=_({}),i=_({}),d=_(!1),o=y(()=>I().props.value.auth.user);console.log("dd user : ",o.value),P(async()=>{s.value=A(),a.value=await Z("pk_test_51LtbdoAshxV8KD7KZ8tO9w1umHokBfUYESaAsZ16elCBhaqRC1ZBtWPjLUksI8R3jq1GKRfQoxMMUB2VdCUiZtEH00lfrnGVw7");const c=a.value.elements();i.value=c.create("card",{classes:{base:"bg-gray-100 rounded border border-gray-300 focus:border-indigo-500 text-base outline-none text-gray-700 p-3 leading-8 transition-colors duration-200 ease-in-out"}}),i.value.mount("#card-element")});let x=y(()=>{let c=0;for(let l of s.value)c+=l.price*l.quantity;return c});const E=async()=>{d.value=!0;const{paymentMethod:c,error:l}=await a.value.createPaymentMethod("card",i.value,{billing_details:{name:o.value.first_name+" "+o.value.last_name,email:o.value.email,address:{line1:o.value.address,city:o.value.city,state:o.value.state,postal_code:o.value.zip_code}}});if(l)d.value=!1,console.error(l),alert(l.message);else{console.log("metode : ",c),o.value.payment_method_id=c.id,o.value.subtotal=x.value,o.value.delivery_fee=500,o.value.cart=JSON.stringify(s.value),console.log("user : ",o.value);const n=await R.post("/purchase",o.value);console.log("THE RESULT : ",n),d.value=!1,n.status==200&&(console.log("200"),s.value=[],localStorage.setItem("cart","[]"),window.location=route("orders.index"))}};return(c,l)=>(f(),h("div",null,[e("div",K,[e("nav",H,[e("div",J,[e("div",Q,[e("div",X,[e("div",Y,[m(r(B),{href:c.route("home.index")},{default:L(()=>[m(T,{class:"block h-9 w-auto"})]),_:1},8,["href"])])])])])]),t.value?(f(),h("header",ee,[e("div",te,[se,m(r(N),{class:"h-5 w-5 min-w-[1.25rem] cursor-pointer",onClick:l[0]||(l[0]=n=>t.value=!1)})])])):V("",!0),e("main",oe,[e("div",ae,[e("div",de,[e("div",ne,[e("form",ie,[e("div",le,[e("div",re,[ce,e("div",ue,[e("div",me,[pe,e("input",{disabled:d.value,type:"text",name:"first-name",id:"first-name",autocomplete:"given-name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:c.$page.props.auth.user.first_name},null,8,_e)]),e("div",fe,[he,e("input",{disabled:d.value,type:"text",name:"last-name",id:"last-name",autocomplete:"family-name",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:c.$page.props.auth.user.last_name},null,8,be)]),e("div",ge,[ve,e("input",{disabled:d.value,type:"text",name:"email-address",id:"email-address",autocomplete:"email",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",value:c.$page.props.auth.user.email},null,8,xe)]),e("div",ye,[we,e("div",Se,[e("span",ke,[m(r(q),{class:"h-5 w-5"})]),e("input",{disabled:d.value,type:"text",name:"company-website",id:"company-website",class:"block w-full flex-1 rounded-none rounded-r-md border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:""},null,8,je)])]),e("div",Ce,[Ee,e("select",{disabled:d.value,id:"country",name:"country",autocomplete:"country-name",class:"mt-1 block w-full rounded-md border border-gray-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm"},Me,8,Pe)]),e("div",Re,[Be,b(e("input",{disabled:d.value,type:"text",name:"street-address",id:"street-address",autocomplete:"street-address","onUpdate:modelValue":l[1]||(l[1]=n=>r(o).address=n),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,Ie),[[g,r(o).address]])]),e("div",Te,[Ae,b(e("input",{disabled:d.value,type:"text",name:"city",id:"city",autocomplete:"address-level2","onUpdate:modelValue":l[2]||(l[2]=n=>r(o).city=n),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,Ne),[[g,r(o).city]])]),e("div",qe,[Fe,b(e("input",{disabled:d.value,type:"text",name:"region",id:"region",autocomplete:"address-level1","onUpdate:modelValue":l[3]||(l[3]=n=>r(o).state=n),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,Oe),[[g,r(o).state]])]),e("div",ze,[De,b(e("input",{disabled:d.value,type:"text",name:"postal-code",id:"postal-code",autocomplete:"postal-code","onUpdate:modelValue":l[4]||(l[4]=n=>r(o).zip_code=n),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,Ge),[[g,r(o).zip_code]])])]),We,e("div",Ze,[Ke,e("div",He,[e("div",Je,[e("div",Qe,[Xe,m(r(w),{class:"h-6 w-6 text-indigo-500"})]),Ye,et]),e("div",tt,[e("div",st,[ot,m(r(w),{class:"h-6 w-6 hidden"})]),at,dt])])]),e("div",nt,[it,e("div",lt,[e("div",rt,[e("input",{disabled:d.value,type:"radio",name:"payment",id:"cc",class:"focus:ring-0 border border-gray-300",checked:""},null,8,ct),ut])]),mt])])])])])]),e("div",pt,[e("div",_t,[ft,e("div",ht,[e("ul",bt,[(f(!0),h($,null,U(s.value,n=>(f(),h("li",{key:n.product_id,class:"flex py-6"},[e("div",gt,[e("img",{src:n.image.path,alt:"",class:"h-full w-full object-cover object-center"},null,8,vt)]),e("div",xt,[e("div",null,[e("div",yt,[e("h3",null,[e("a",{href:c.route("products.show",n.product_id)},p(n.title),9,wt)]),e("p",St,p(n.price),1)])]),e("div",kt,[e("p",jt,"Qty "+p(n.quantity),1),Ct])])]))),128))])]),e("div",Et,[e("div",Pt,[Lt,e("p",null,"$"+p(r(x)),1)]),Vt,e("div",$t,[Ut,e("p",null,"$"+p(r(x)+5),1)]),e("div",Mt,[e("button",{onClick:E,class:"flex items-center justify-center rounded-md border border-transparent bg-indigo-600 px-6 py-3 text-base font-medium text-white shadow-sm hover:bg-indigo-700",textContent:p(d.value?"Processing...":"Confirm Order")},null,8,Rt)])])])])])])])]))}};export{Nt as default};
